%###############################################################################
%# North - Manual - Main                                                       #
%###############################################################################
%#    Copyright 2024 Dirk Heisswolf                                            #
%#    This file is part of the North project.                                  #
%#                                                                             #
%#    North is free software: you can redistribute it and/or modify            #
%#    it under the terms of the GNU General Public License as published by     #
%#    the Free Software Foundation, either version 3 of the License, or        #
%#    (at your option) any later version.                                      #
%#                                                                             #
%#    North is distributed in the hope that it will be useful,                 #
%#    but WITHOUT ANY WARRANTY; without even the implied warranty of           #
%#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the            #
%#    GNU General Public License for more details.                             #
%#                                                                             #
%#    You should have received a copy of the GNU General Public License        #
%#    along with North. If not, see <http://www.gnu.org/licenses/>.            #
%###############################################################################
%# Version History:                                                            #
%#   February 24, 2023                                                         #
%#      - Initial release                                                      #
%###############################################################################

\documentclass[a4paper,
               titlepage,
               bibliography=totocnumbered]{article}

\usepackage[table]{xcolor}
\usepackage[margin=4cm]{geometry}
\usepackage{float}
\usepackage{fancyhdr}
\usepackage{nameref}
\usepackage{enumitem}
\usepackage{longtable}
\usepackage{multirow}
\usepackage{makecell}
\usepackage{adjustbox}
\usepackage{calc}
\usepackage{graphicx}
\usepackage{pgf}
\usepackage{tikz}
\usepackage{tikz-timing}
\usepackage[colorlinks=true,
            linkcolor=blue,
            citecolor=blue,
            urlcolor=blue,
            bookmarks=true,
            bookmarksopen=true,
            pdftitle={North Manual},
            pdfauthor={Dirk Heisswolf},
            pdfdisplaydoctitle=true]{hyperref}
\usepackage[automake, numberedsection, nonumberlist]{glossaries}
\usepackage{amssymb}
\usepackage{listings}
\usepackage[width=.9\textwidth]{caption}
\usepackage{tabto}

%Tables
\makeatletter
\def\nobreakhline{
  \noalign{\ifnum0=`}\fi
    \penalty\@M
    \futurelet\@let@token\LT@@nobreakhline}
\def\LT@@nobreakhline{
  \ifx\@let@token\hline
    \global\let\@gtempa\@gobble
    \gdef\LT@sep{\penalty\@M\vskip\doublerulesep}
  \else
    \global\let\@gtempa\@empty
    \gdef\LT@sep{\penalty\@M\vskip-\arrayrulewidth}
  \fi
  \ifnum0=`{\fi}
  \multispan\LT@cols
     \unskip\leaders\hrule\@height\arrayrulewidth\hfill\cr
  \noalign{\LT@sep}%
  \multispan\LT@cols
     \unskip\leaders\hrule\@height\arrayrulewidth\hfill\cr
  \noalign{\penalty\@M}
  \@gtempa}
\makeatother

\pagestyle{fancy}
\setlength{\parindent}{0pt}

%Glossary
\makeglossaries
\include{North_glossary}

\begin{document}

%Overline
\makeatletter
\newcommand*{\textoverline}[1]{$\overline{\hbox{#1}}\m@th$}
\makeatother

%Counters
\makeatletter
\renewcommand{\thetable}{\thesection-\@arabic\c@table}
\@addtoreset{table}{section}
\makeatother

\makeatletter
\renewcommand{\thefigure}{\thesection-\@arabic\c@figure}
\@addtoreset{figure}{section}
\makeatother

\setcounter{secnumdepth}{4}

%References
\newcommand{\secref}[2][Section]{\hyperref[{#2}]{\mbox{#1~\ref*{#2}} \mbox{``\nameref*{#2}``}}}
\newcommand{\tabref}[2][Table]{\hyperref[{#2}]{\mbox{#1~\ref*{#2}}}}
\newcommand{\figref}[2][Figure]{\hyperref[{#2}]{\mbox{#1~\ref*{#2}}}}
\renewcommand{\footref}[1]{\textsuperscript{\ref{#1}}}

%Code listings
\lstset{
  basicstyle=\ttfamily,
  columns=fullflexible,
}

%--------------------
% Title
%--------------------
%\title{North Manual}
%\date{\today}
%\author{Dirk Heisswolf}
%\maketitle

\begin{titlepage}
  \centering
  \includegraphics[width=1\textwidth]{./North_logo.eps} \par
  \vspace{-1cm}
  \Large \texttt{Forth for the N1 Processor} \par
  \vspace{2cm}
  \LARGE North Manual \par
  \vspace{1cm}
  \Large Dirk Heisswolf \par
  \vspace{0.5cm}
  \large \today \par
\end{titlepage}

%--------------------
% Revision History
%--------------------
\include{North_history}

%--------------------
% Table of Contents
%--------------------
\setcounter{tocdepth}{2}
\tableofcontents
\pagebreak
\listoffigures
\pagebreak
\listoftables

%--------------------
% Overview
%--------------------
%\include{North_overview}

%--------------------
% Instruction Set
%--------------------
%\include{North_build}
%--------------------
% Glossary
%--------------------
%\clearpage
\setglossarystyle{altlist}
\printglossaries

%--------------------
% Bibliography
%--------------------
\clearpage
%\phantomsection
%\addcontentsline{toc}{section}{References}
\section{References}
\bibliographystyle{plain}
\renewcommand{\section}[2]{}%
\bibliography{North.bib}

\end{document}
